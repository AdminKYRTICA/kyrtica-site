/* ========================= Scroll-snap + Reveal ========================= */

/* 1) Smooth anchor scrolling */
html { scroll-behavior: smooth; }

/* 2) Scroll-snap on larger screens (gentle lock between sections) */
@media (min-width: 900px){
  main{
    scroll-snap-type: y proximity;   /* use 'mandatory' for stronger snap */
  }
  .snap{
    scroll-snap-align: start;
    scroll-margin-top: 72px;         /* keep out from under sticky header */
  }
}

/* 3) Base reveal states (visible by default, animate only when .js class is present) */
.reveal { opacity: 1; transform: none; }
.js .reveal{
  opacity: 0;
  transform: translateY(16px);
  transition: opacity .55s ease, transform .55s ease;
  will-change: opacity, transform;
}
.js .reveal.in{ opacity: 1; transform: none; }

/* 4) “Random-ish” stagger without JS randomness:
      We vary transition-delay via nth-child patterns so items feel organically offset.
      Works for any group of .reveal siblings (grids, lists, cards). */
.js .reveal{ --d: 0ms; transition-delay: var(--d); }
.js .reveal:nth-child(3n){ --d: 80ms; }
.js .reveal:nth-child(4n + 1){ --d: 140ms; }
.js .reveal:nth-child(5n + 2){ --d: 220ms; }

/* Optional: stronger stagger for dense grids (Hubs cards, Review cards, logos strip) */
.k-grid .reveal{ --d: 40ms; }
.k-grid .reveal:nth-child(3n){ --d: 120ms; }
.k-grid .reveal:nth-child(4n + 1){ --d: 200ms; }
.k-grid .reveal:nth-child(5n + 2){ --d: 300ms; }

.review-grid .reveal{ --d: 40ms; }
.review-grid .reveal:nth-child(3n){ --d: 110ms; }
.review-grid .reveal:nth-child(4n + 1){ --d: 190ms; }
.review-grid .reveal:nth-child(5n + 2){ --d: 260ms; }

.logos-wrap .reveal{ --d: 30ms; }
.logos-wrap .reveal:nth-child(3n){ --d: 90ms; }
.logos-wrap .reveal:nth-child(4n + 1){ --d: 160ms; }
.logos-wrap .reveal:nth-child(5n + 2){ --d: 230ms; }

/* 5) Section-to-section divider (subtle line to emphasize transitions) */
.snap + .snap { border-top: 1px solid rgba(255,255,255,.06); }
.logos-strip.snap + .snap { border-top: none; } /* keep white band clean */

/* 6) Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce){
  html { scroll-behavior: auto; }
  .js .reveal,
  .js .reveal.in{
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }
  main{ scroll-snap-type: none; }
}
